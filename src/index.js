import WebGLHandler from './handler/WebGLHandler.js';
import Converter from './utils/Converter.js';
import UIHandler from './handler/UIHandler.js';

// to be deleted
const CubeModel = {
    "vertices": [
        -0.4, -0.4, 0.5,
        -0.5, -0.5, 0.5,
        0.5, -0.5, 0.5,
        0.5, -0.5, 0.5,
        0.4, -0.4, 0.5,
        -0.4, -0.4, 0.5,
        -0.4, -0.4, -0.4,
        -0.4, -0.5, -0.4,
        0.4, -0.5, -0.4,
        0.4, -0.5, -0.4,
        0.4, -0.4, -0.4,
        -0.4, -0.4, -0.4,
        0.5, -0.4, 0.4000000000000001,
        0.49999999999999994, -0.5, 0.5,
        0.5, -0.5, -0.49999999999999994,
        0.5, -0.5, -0.49999999999999994,
        0.5, -0.4, -0.39999999999999997,
        0.5, -0.4, 0.4000000000000001,
        -0.4, -0.4, 0.4,
        -0.4, -0.5, 0.4,
        -0.4, -0.5, -0.4,
        -0.4, -0.5, -0.4,
        -0.4, -0.4, -0.4,
        -0.4, -0.4, 0.4,
        0.4000000000000001, -0.4, -0.49999999999999994,
        0.5000000000000001, -0.5, -0.49999999999999994,
        -0.49999999999999994, -0.5, -0.5000000000000001,
        -0.49999999999999994, -0.5, -0.5000000000000001,
        -0.39999999999999997, -0.4, -0.5,
        0.4000000000000001, -0.4, -0.49999999999999994,
        0.39999999999999997, -0.4, 0.4000000000000001,
        0.39999999999999997, -0.5, 0.4000000000000001,
        -0.4000000000000001, -0.5, 0.39999999999999997,
        -0.4000000000000001, -0.5, 0.39999999999999997,
        -0.4000000000000001, -0.4, 0.39999999999999997,
        0.39999999999999997, -0.4, 0.4000000000000001,
        -0.49999999999999994, -0.4, -0.40000000000000013,
        -0.4999999999999999, -0.5, -0.5000000000000001,
        -0.5000000000000001, -0.5, 0.4999999999999999,
        -0.5000000000000001, -0.5, 0.4999999999999999,
        -0.5000000000000001, -0.4, 0.3999999999999999,
        -0.49999999999999994, -0.4, -0.40000000000000013,
        0.4000000000000001, -0.4, -0.39999999999999997,
        0.4000000000000001, -0.5, -0.39999999999999997,
        0.39999999999999997, -0.5, 0.4000000000000001,
        0.39999999999999997, -0.5, 0.4000000000000001,
        0.39999999999999997, -0.4, 0.4000000000000001,
        0.4000000000000001, -0.4, -0.39999999999999997,
        0.4, -0.4, 0.5,
        0.49999999999999994, -0.5, 0.5,
        0.5, 0.49999999999999994, 0.5,
        0.5, 0.49999999999999994, 0.5,
        0.4, 0.4, 0.5,
        0.4, -0.4, 0.5,
        0.4, -0.4, -0.4,
        0.5, -0.4000000000000001, -0.4,
        0.5, 0.39999999999999997, -0.4,
        0.5, 0.39999999999999997, -0.4,
        0.4, 0.4, -0.4,
        0.4, -0.4, -0.4,
        0.5, -0.4, -0.39999999999999997,
        0.5, -0.5, -0.4999999999999999,
        0.5, 0.49999999999999994, -0.49999999999999994,
        0.5, 0.49999999999999994, -0.49999999999999994,
        0.5, 0.4, -0.39999999999999997,
        0.5, -0.4, -0.39999999999999997,
        -0.4, -0.4, -0.4,
        -0.39999999999999997, -0.4000000000000001, -0.5,
        -0.39999999999999997, 0.39999999999999997, -0.5,
        -0.39999999999999997, 0.39999999999999997, -0.5,
        -0.4, 0.4, -0.4,
        -0.4, -0.4, -0.4,
        -0.39999999999999997, -0.4, -0.5,
        -0.4999999999999999, -0.5, -0.5000000000000001,
        -0.49999999999999994, 0.49999999999999994, -0.5000000000000001,
        -0.49999999999999994, 0.49999999999999994, -0.5000000000000001,
        -0.39999999999999997, 0.4, -0.5,
        -0.39999999999999997, -0.4, -0.5,
        -0.4000000000000001, -0.4, 0.39999999999999997,
        -0.5, -0.4000000000000001, 0.39999999999999997,
        -0.5, 0.39999999999999997, 0.39999999999999997,
        -0.5, 0.39999999999999997, 0.39999999999999997,
        -0.4000000000000001, 0.4, 0.39999999999999997,
        -0.4000000000000001, -0.4, 0.39999999999999997,
        -0.5000000000000001, -0.4, 0.3999999999999999,
        -0.5000000000000001, -0.5, 0.49999999999999983,
        -0.5000000000000001, 0.49999999999999994, 0.4999999999999999,
        -0.5000000000000001, 0.49999999999999994, 0.4999999999999999,
        -0.5000000000000001, 0.4, 0.3999999999999999,
        -0.5000000000000001, -0.4, 0.3999999999999999,
        0.39999999999999997, -0.4, 0.4000000000000001,
        0.3999999999999999, -0.4000000000000001, 0.5000000000000001,
        0.3999999999999999, 0.39999999999999997, 0.5000000000000001,
        0.3999999999999999, 0.39999999999999997, 0.5000000000000001,
        0.39999999999999997, 0.4, 0.4000000000000001,
        0.39999999999999997, -0.4, 0.4000000000000001,
        0.4000000000000001, 0.39999999999999997, 0.5,
        0.5000000000000001, 0.49999999999999994, 0.5,
        -0.49999999999999994, 0.5000000000000001, 0.5,
        -0.49999999999999994, 0.5000000000000001, 0.5,
        -0.39999999999999997, 0.4000000000000001, 0.5,
        0.4000000000000001, 0.39999999999999997, 0.5,
        0.4000000000000001, 0.39999999999999997, -0.4,
        0.4000000000000001, 0.49999999999999994, -0.4,
        -0.39999999999999997, 0.5, -0.4,
        -0.39999999999999997, 0.5, -0.4,
        -0.39999999999999997, 0.4000000000000001, -0.4,
        0.4000000000000001, 0.39999999999999997, -0.4,
        0.5, 0.39999999999999997, -0.4,
        0.5, 0.49999999999999994, -0.5000000000000001,
        0.49999999999999994, 0.5000000000000001, 0.5,
        0.49999999999999994, 0.5000000000000001, 0.5,
        0.5, 0.4000000000000001, 0.4,
        0.5, 0.39999999999999997, -0.4,
        -0.4, 0.39999999999999997, -0.4000000000000001,
        -0.4, 0.49999999999999994, -0.4000000000000001,
        -0.4, 0.5, 0.39999999999999997,
        -0.4, 0.5, 0.39999999999999997,
        -0.4, 0.4000000000000001, 0.39999999999999997,
        -0.4, 0.39999999999999997, -0.4000000000000001,
        -0.4, 0.39999999999999997, -0.5,
        -0.5, 0.49999999999999994, -0.5000000000000001,
        0.5, 0.5000000000000001, -0.49999999999999994,
        0.5, 0.5000000000000001, -0.49999999999999994,
        0.4, 0.4000000000000001, -0.49999999999999994,
        -0.4, 0.39999999999999997, -0.5,
        -0.40000000000000013, 0.39999999999999997, 0.39999999999999997,
        -0.40000000000000013, 0.49999999999999994, 0.39999999999999997,
        0.3999999999999999, 0.5, 0.4000000000000001,
        0.3999999999999999, 0.5, 0.4000000000000001,
        0.3999999999999999, 0.4000000000000001, 0.4000000000000001,
        -0.40000000000000013, 0.39999999999999997, 0.39999999999999997,
        -0.5000000000000001, 0.39999999999999997, 0.39999999999999997,
        -0.5000000000000001, 0.49999999999999994, 0.5,
        -0.4999999999999999, 0.5000000000000001, -0.5,
        -0.4999999999999999, 0.5000000000000001, -0.5,
        -0.49999999999999994, 0.4000000000000001, -0.4000000000000001,
        -0.5000000000000001, 0.39999999999999997, 0.39999999999999997,
        0.39999999999999997, 0.39999999999999997, 0.40000000000000013,
        0.39999999999999997, 0.49999999999999994, 0.40000000000000013,
        0.4000000000000001, 0.5, -0.3999999999999999,
        0.4000000000000001, 0.5, -0.3999999999999999,
        0.4000000000000001, 0.4000000000000001, -0.3999999999999999,
        0.39999999999999997, 0.39999999999999997, 0.40000000000000013,
        -0.39999999999999997, 0.4000000000000001, 0.5,
        -0.4999999999999999, 0.5000000000000001, 0.5,
        -0.5000000000000001, -0.4999999999999999, 0.5,
        -0.5000000000000001, -0.4999999999999999, 0.5,
        -0.4000000000000001, -0.39999999999999997, 0.5,
        -0.39999999999999997, 0.4000000000000001, 0.5,
        -0.39999999999999997, 0.4000000000000001, -0.4,
        -0.49999999999999994, 0.40000000000000013, -0.4,
        -0.5000000000000001, -0.3999999999999999, -0.4,
        -0.5000000000000001, -0.3999999999999999, -0.4,
        -0.4000000000000001, -0.39999999999999997, -0.4,
        -0.39999999999999997, 0.4000000000000001, -0.4,
        0.5, 0.4000000000000001, 0.4,
        0.49999999999999994, 0.5000000000000001, 0.49999999999999994,
        0.49999999999999994, -0.4999999999999999, 0.5000000000000001,
        0.49999999999999994, -0.4999999999999999, 0.5000000000000001,
        0.5, -0.39999999999999997, 0.40000000000000013,
        0.5, 0.4000000000000001, 0.4,
        -0.4, 0.4000000000000001, 0.39999999999999997,
        -0.4000000000000001, 0.40000000000000013, 0.49999999999999994,
        -0.4000000000000001, -0.3999999999999999, 0.5000000000000001,
        -0.4000000000000001, -0.3999999999999999, 0.5000000000000001,
        -0.4, -0.39999999999999997, 0.4000000000000001,
        -0.4, 0.4000000000000001, 0.39999999999999997,
        0.4, 0.4000000000000001, -0.49999999999999994,
        0.49999999999999994, 0.5000000000000001, -0.49999999999999994,
        0.5000000000000002, -0.4999999999999999, -0.49999999999999994,
        0.5000000000000002, -0.4999999999999999, -0.49999999999999994,
        0.40000000000000013, -0.39999999999999997, -0.49999999999999994,
        0.4, 0.4000000000000001, -0.49999999999999994,
        0.3999999999999999, 0.4000000000000001, 0.4000000000000001,
        0.4999999999999999, 0.40000000000000013, 0.4000000000000001,
        0.5000000000000001, -0.3999999999999999, 0.4000000000000001,
        0.5000000000000001, -0.3999999999999999, 0.4000000000000001,
        0.4, -0.39999999999999997, 0.4000000000000001,
        0.3999999999999999, 0.4000000000000001, 0.4000000000000001,
        -0.49999999999999994, 0.4000000000000001, -0.4000000000000001,
        -0.4999999999999999, 0.5000000000000001, -0.5,
        -0.4999999999999999, -0.4999999999999999, -0.5000000000000002,
        -0.4999999999999999, -0.4999999999999999, -0.5000000000000002,
        -0.49999999999999994, -0.39999999999999997, -0.4000000000000002,
        -0.49999999999999994, 0.4000000000000001, -0.4000000000000001,
        0.4000000000000001, 0.4000000000000001, -0.3999999999999999,
        0.40000000000000013, 0.40000000000000013, -0.4999999999999999,
        0.40000000000000013, -0.3999999999999999, -0.5,
        0.40000000000000013, -0.3999999999999999, -0.5,
        0.4000000000000001, -0.39999999999999997, -0.4,
        0.4000000000000001, 0.4000000000000001, -0.3999999999999999,
        -0.4, -0.5, -0.39999999999999997,
        -0.5, -0.5, -0.49999999999999994,
        0.5, -0.5, -0.49999999999999994,
        0.5, -0.5, -0.49999999999999994,
        0.4, -0.5, -0.39999999999999997,
        -0.4, -0.5, -0.39999999999999997,
        -0.4, 0.4, -0.4,
        -0.4, 0.39999999999999997, -0.5,
        0.4, 0.39999999999999997, -0.5,
        0.4, 0.39999999999999997, -0.5,
        0.4, 0.4, -0.4,
        -0.4, 0.4, -0.4,
        -0.4, 0.5, 0.4000000000000001,
        -0.5, 0.49999999999999994, 0.5,
        0.5, 0.49999999999999994, 0.5,
        0.5, 0.49999999999999994, 0.5,
        0.4, 0.5, 0.4000000000000001,
        -0.4, 0.5, 0.4000000000000001,
        -0.4, -0.4, 0.4,
        -0.4, -0.4000000000000001, 0.5,
        0.4, -0.4000000000000001, 0.5,
        0.4, -0.4000000000000001, 0.5,
        0.4, -0.4, 0.4,
        -0.4, -0.4, 0.4,
        0.4, -0.5, -0.39999999999999997,
        0.49999999999999994, -0.5, -0.49999999999999994,
        0.5, -0.49999999999999994, 0.5,
        0.5, -0.49999999999999994, 0.5,
        0.4, -0.5, 0.4000000000000001,
        0.4, -0.5, -0.39999999999999997,
        0.4, 0.4, -0.4,
        0.5, 0.4, -0.4000000000000001,
        0.5, 0.4, 0.39999999999999997,
        0.5, 0.4, 0.39999999999999997,
        0.4, 0.4, 0.4,
        0.4, 0.4, -0.4,
        0.4, 0.5, 0.4000000000000001,
        0.49999999999999994, 0.49999999999999994, 0.5,
        0.5, 0.5, -0.4999999999999999,
        0.5, 0.5, -0.4999999999999999,
        0.4, 0.5, -0.39999999999999997,
        0.4, 0.5, 0.4000000000000001,
        0.4, -0.4, 0.4,
        0.5, -0.4, 0.4000000000000001,
        0.5, -0.4, -0.39999999999999997,
        0.5, -0.4, -0.39999999999999997,
        0.4, -0.4, -0.4,
        0.4, -0.4, 0.4,
        0.4000000000000001, -0.5, 0.4,
        0.5000000000000001, -0.49999999999999994, 0.5,
        -0.49999999999999994, -0.49999999999999994, 0.5000000000000001,
        -0.49999999999999994, -0.49999999999999994, 0.5000000000000001,
        -0.39999999999999997, -0.5, 0.40000000000000013,
        0.4000000000000001, -0.5, 0.4,
        0.4000000000000001, 0.4, 0.39999999999999997,
        0.4000000000000001, 0.4000000000000001, 0.49999999999999994,
        -0.39999999999999997, 0.4000000000000001, 0.5,
        -0.39999999999999997, 0.4000000000000001, 0.5,
        -0.39999999999999997, 0.4, 0.4000000000000001,
        0.4000000000000001, 0.4, 0.39999999999999997,
        0.4000000000000001, 0.5, -0.3999999999999999,
        0.5000000000000001, 0.5, -0.4999999999999999,
        -0.49999999999999994, 0.5, -0.5000000000000001,
        -0.49999999999999994, 0.5, -0.5000000000000001,
        -0.39999999999999997, 0.5, -0.4,
        0.4000000000000001, 0.5, -0.3999999999999999,
        0.4000000000000001, -0.4, -0.39999999999999997,
        0.4000000000000001, -0.39999999999999997, -0.49999999999999994,
        -0.39999999999999997, -0.39999999999999997, -0.5,
        -0.39999999999999997, -0.39999999999999997, -0.5,
        -0.39999999999999997, -0.4, -0.4000000000000001,
        0.4000000000000001, -0.4, -0.39999999999999997,
        -0.39999999999999997, -0.5, 0.40000000000000013,
        -0.4999999999999999, -0.49999999999999994, 0.5000000000000001,
        -0.5000000000000001, -0.5, -0.49999999999999983,
        -0.5000000000000001, -0.5, -0.49999999999999983,
        -0.4000000000000001, -0.5, -0.3999999999999999,
        -0.39999999999999997, -0.5, 0.40000000000000013,
        -0.39999999999999997, 0.4, 0.4000000000000001,
        -0.49999999999999994, 0.4, 0.40000000000000013,
        -0.5000000000000001, 0.4, -0.3999999999999999,
        -0.5000000000000001, 0.4, -0.3999999999999999,
        -0.4000000000000001, 0.4, -0.39999999999999997,
        -0.39999999999999997, 0.4, 0.4000000000000001,
        -0.39999999999999997, 0.5, -0.4,
        -0.4999999999999999, 0.5, -0.5000000000000001,
        -0.5000000000000001, 0.49999999999999994, 0.49999999999999994,
        -0.5000000000000001, 0.49999999999999994, 0.49999999999999994,
        -0.4000000000000001, 0.5, 0.4,
        -0.39999999999999997, 0.5, -0.4,
        -0.39999999999999997, -0.4, -0.4000000000000001,
        -0.49999999999999994, -0.4, -0.40000000000000013,
        -0.5000000000000001, -0.4, 0.3999999999999999,
        -0.5000000000000001, -0.4, 0.3999999999999999,
        -0.4000000000000001, -0.4, 0.39999999999999997,
        -0.39999999999999997, -0.4, -0.4000000000000001
    ],
    "colors": [
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255,
        255, 255, 255
    ],
    "normals": [
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        0, 0, 1,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1, 0, 6.123233995736766e-17,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        1.2246467991473532e-16, 0, -1,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        -1, 0, -1.8369701987210297e-16,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, -1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17,
        0, 1, 6.123233995736766e-17
    ]
}

let webgl = new WebGLHandler(document.querySelector('canvas')).init();
let state = {
    model: { vertices: CubeModel.vertices, colors: CubeModel.colors, normals: CubeModel.normals },
    translation: [0, 0, 0],
    rotation: [
        Converter.degToRad(0),
        Converter.degToRad(0),
        Converter.degToRad(0),
    ],
    animation_rotation: [
        Converter.degToRad(0),
        Converter.degToRad(0),
        Converter.degToRad(0),
    ],
    scale: [1, 1, 1],
    projectionType: 'orthographic',
    useLighting: true,
    fudgeFactor: 0,
    obliqueTetha: 0,
    obliquePhi: 0,
    cameraRadius: -1.3,
    cameraRotation: Converter.degToRad(0),
    animation: false,
};
const renderSettings = {
    primitiveType: webgl.getGl().TRIANGLES,
    drawCounter: state.model.vertices.length,
};

const eventHandler = {
    updatePosition(index) {
        return (event, value) => {
            state.animation = false;
            state.translation[index] = value;
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    updateRotation(index) {
        return (event, value) => {
            state.animation = false;
            const angleInDegrees = value;
            const angleInRadians = Converter.degToRad(angleInDegrees);
            state.rotation[index] = angleInRadians;
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    updateScale(index) {
        return (event, value) => {
            state.animation = false;
            state.scale[index] = value;
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    openModel() {
        return (event) => {
            var input = document.createElement('input');
            input.type = 'file';
            input.setAttribute('accept', 'application/json, .txt');
            input.onchange = (e) => {
                var file = e.target.files[0];

                if (!file) {
                    return;
                }

                var reader = new FileReader();
                reader.readAsText(file, 'UTF-8');

                reader.onload = (readerEvent) => {
                    var content = readerEvent.target.result;
                    content = JSON.parse(content);
                    // set all to default
                    state.model = content;
                    renderSettings.drawCounter = content.vertices.length;
                    const toDefault = document.querySelector('button#toDefault');
                    toDefault.click();

                    webgl.destroy();
                    webgl = new WebGLHandler(document.querySelector('canvas')).init();

                    webgl
                        .clearBuffer()
                        .setVertices(state.model.vertices)
                        .setColors(state.model.colors)
                        .setNormals(state.model.normals)
                        .render(renderSettings, state);
                };
            };
            input.click();
        };
    },

    updateProjectionType() {
        return (event) => {
            state.projectionType = event.target.value;

            if (state.projectionType === 'perspective') {
                state.fudgeFactor = 0.3;
            } else {
                state.fudgeFactor = 0;
            }

            if (state.projectionType === 'oblique') {
                state.obliqueTetha = Converter.degToRad(63.5);
                state.obliquePhi = Converter.degToRad(63.5);
            } else {
                state.obliqueTetha = 0;
                state.obliquePhi = 0;
            }

            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    updateShadingState() {
        return (event) => {
            state.useLighting = event.target.checked;
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    updateCameraRadius() {
        return (event, value) => {
            state.cameraRadius = value;
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    updateCameraRotation() {
        return (event, value) => {
            state.cameraRotation = Converter.degToRad(value);
            webgl.clearBuffer().render(renderSettings, state);
        };
    },

    toDefaultButtonHandler() {
        return (event) => {
            const initialState = {
                translation: [0, 0, 0],
                rotation: [
                    Converter.degToRad(0),
                    Converter.degToRad(0),
                    Converter.degToRad(0),
                ],
                animation_rotation: [
                    Converter.degToRad(0),
                    Converter.degToRad(0),
                    Converter.degToRad(0),
                ],
                scale: [1, 1, 1],
                projectionType: 'orthographic',
                useLighting: true,
                fudgeFactor: 0,
                obliqueTetha: 0,
                obliquePhi: 0,
                cameraRadius: -1.3,
                cameraRotation: Converter.degToRad(0),
                animation: false,
            };
            document.querySelector('#projection').value = initialState.projectionType;
            document.querySelector('#projection').dispatchEvent(new Event('input'));
            document.querySelector('#shading').value = initialState.useLighting;
            const cameraRadius = document.querySelector('#cameraRadius');
            cameraRadius.value = initialState.cameraRadius;
            cameraRadius.nextElementSibling.value = initialState.cameraRadius;

            const cameraRotation = document.querySelector('#cameraRotation');
            cameraRotation.value = initialState.cameraRotation;
            cameraRotation.nextElementSibling.value = initialState.cameraRotation;

            document.querySelectorAll('.translation').forEach((el, idx) => {
                el.value = initialState.translation[idx];
                el.nextElementSibling.value = initialState.translation[idx];
            });
            document.querySelectorAll('.rotation').forEach((el, idx) => {
                el.value = initialState.rotation[idx];
                el.nextElementSibling.value = initialState.rotation[idx];
            });
            document.querySelectorAll('.scaling').forEach((el, idx) => {
                el.value = initialState.scale[idx];
                el.nextElementSibling.value = initialState.scale[idx];
            });
            document.querySelector('#shading').checked = initialState.useLighting;
            state = { ...initialState, model: state.model };
            webgl.clearBuffer().render(renderSettings, state);
        };
    },
};

UIHandler.initSlider('#obj-translation-x', {
    initialValue: state.translation[0],
    handlerFn: eventHandler.updatePosition(0),
});

UIHandler.initSlider('#obj-translation-y', {
    initialValue: state.translation[1],
    handlerFn: eventHandler.updatePosition(1),
});

UIHandler.initSlider('#obj-translation-z', {
    initialValue: state.translation[2],
    handlerFn: eventHandler.updatePosition(2),
});

UIHandler.initSlider('#obj-rotation-x', {
    initialValue: state.rotation[0],
    handlerFn: eventHandler.updateRotation(0),
});

UIHandler.initSlider('#obj-rotation-y', {
    initialValue: state.rotation[1],
    handlerFn: eventHandler.updateRotation(1),
});

UIHandler.initSlider('#obj-rotation-z', {
    initialValue: state.rotation[2],
    handlerFn: eventHandler.updateRotation(2),
});

UIHandler.initSlider('#obj-scaling-x', {
    initialValue: state.scale[0],
    handlerFn: eventHandler.updateScale(0),
});

UIHandler.initSlider('#obj-scaling-y', {
    initialValue: state.scale[1],
    handlerFn: eventHandler.updateScale(1),
});

UIHandler.initSlider('#obj-scaling-z', {
    initialValue: state.scale[2],
    handlerFn: eventHandler.updateScale(2),
});

// UIHandler.initButton('#model', {
//   handlerFn: eventHandler.openModel(),
// });

UIHandler.initRadio('#projection', {
  initialValue: state.projectionType,
  handlerFn: eventHandler.updateProjectionType(),
});

// UIHandler.initCheckbox('#shading', {
//   initialValue: state.useLighting,
//   handlerFn: eventHandler.updateShadingState(),
// });

// UIHandler.initSlider('#cameraRadius', {
//   initialValue: state.cameraRadius,
//   handlerFn: eventHandler.updateCameraRadius(),
// });

// UIHandler.initSlider('#cameraRotation', {
//   initialValue: state.cameraRotation,
//   handlerFn: eventHandler.updateCameraRotation(),
// });

// UIHandler.initButton('button#toDefault', {
//   handlerFn: eventHandler.toDefaultButtonHandler(),
// });

webgl
    .clearBuffer()
    .setVertices(state.model.vertices)
    .setColors(state.model.colors)
    .setNormals(state.model.normals)
    .render(renderSettings, state);

const saveToJSON = () => {
    let { vertices, colors, normals } = state.model;

    const json = JSON.stringify({ vertices, colors, normals });
    const data = new Blob([json], { type: 'text/plain' });
    const textFile = window.URL.createObjectURL(data);
    const link = document.createElement('a');
    link.setAttribute('download', 'shapes.json');
    link.href = textFile;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
};
// document.getElementById('save').addEventListener('click', saveToJSON);

const startAnimation = () => {
    state.animation = true;
    webgl.clearBuffer().renderAnimation(renderSettings, state);
};
// document.getElementById('animate').addEventListener('click', startAnimation);

const stopAnimation = () => {
    state.animation = false;
    webgl.clearBuffer().renderAnimation(renderSettings, state);
};

// document
//   .getElementById('stop_animate')
//   .addEventListener('click', stopAnimation);
